# æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„æŒ‡å—
## ç®€ä»‹
AISBench Benchmark æä¾›æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„èƒ½åŠ›ã€‚é’ˆå¯¹æµå¼æ¨ç†åœºæ™¯ï¼Œé€šè¿‡ç²¾ç¡®è®°å½•æ¯æ¡è¯·æ±‚çš„å‘é€æ—¶é—´ã€å„é˜¶æ®µè¿”å›æ—¶é—´åŠå“åº”å†…å®¹ï¼Œç³»ç»Ÿåœ°è¯„ä¼°æ¨¡å‹æœåŠ¡åœ¨å®é™…éƒ¨ç½²ç¯å¢ƒä¸­çš„å“åº”å»¶è¿Ÿï¼ˆå¦‚ TTFTã€Tokené—´å»¶è¿Ÿï¼‰ã€ååèƒ½åŠ›ï¼ˆå¦‚ QPSã€TPUTï¼‰ã€å¹¶å‘å¤„ç†èƒ½åŠ›ç­‰å…³é”®æ€§èƒ½æŒ‡æ ‡ã€‚

ç”¨æˆ·å¯é€šè¿‡é…ç½®æœåŠ¡åŒ–åç«¯å‚æ•°ï¼Œçµæ´»æ§åˆ¶è¯·æ±‚å†…å®¹ã€è¯·æ±‚é—´éš”ã€å¹¶å‘æ•°é‡ç­‰ï¼Œé€‚é…ä¸åŒè¯„æµ‹åœºæ™¯ï¼ˆå¦‚ä½å¹¶å‘å»¶è¿Ÿæ•æ„Ÿå‹ã€é«˜å¹¶å‘ååä¼˜å…ˆå‹ç­‰ï¼‰ã€‚æµ‹è¯„æ”¯æŒè‡ªåŠ¨åŒ–æ‰§è¡Œå¹¶è¾“å‡ºç»“æ„åŒ–ç»“æœï¼Œä¾¿äºæ¨ªå‘å¯¹æ¯”ä¸åŒæ¨¡å‹ã€éƒ¨ç½²æ–¹æ¡ˆã€ç¡¬ä»¶é…ç½®ä¸‹çš„æœåŠ¡æ€§èƒ½å·®å¼‚ã€‚
## æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å¿«é€Ÿå…¥é—¨
### å‘½ä»¤å«ä¹‰
AISBenchæœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å‘½ä»¤å«ä¹‰ä¸ğŸ“š [å·¥å…·å¿«é€Ÿå…¥é—¨/å‘½ä»¤å«ä¹‰](../../get_started/quick_start.md#å‘½ä»¤å«ä¹‰)ä¸­çš„è§£é‡Šç›¸åŒã€‚åœ¨æ­¤åŸºç¡€ä¸Šéœ€è¦é¢å¤–åŠ ä¸Š`--mode perf`æˆ–`-m perf`æ¥è¿›å…¥æ€§èƒ½è¯„æµ‹åœºæ™¯ï¼Œä»¥å¦‚ä¸‹AISBenchå‘½ä»¤ä¸ºä¾‹ï¼š
```shell
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --summarizer default_perf --mode perf
```
å…¶ä¸­ï¼š
- `--models`æŒ‡å®šäº†æ¨¡å‹ä»»åŠ¡ï¼Œå³`vllm_api_stream_chat`æ¨¡å‹ä»»åŠ¡ã€‚

- `--datasets`æŒ‡å®šäº†æ•°æ®é›†ä»»åŠ¡ï¼Œå³`demo_gsm8k_gen_4_shot_cot_chat_prompt`æ•°æ®é›†ä»»åŠ¡ã€‚

- `--summarizer`æŒ‡å®šäº†ç»“æœå‘ˆç°ä»»åŠ¡ï¼Œå³`default_perf`ç»“æœå‘ˆç°ä»»åŠ¡(ä¸æŒ‡å®š`--summarizer`ç²¾åº¦è¯„æµ‹åœºæ™¯é»˜è®¤ä½¿ç”¨`default_perf`ä»»åŠ¡)ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤ï¼Œä¸éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œåç»­å‘½ä»¤ä¸æŒ‡å®šã€‚

### ä»»åŠ¡å«ä¹‰æŸ¥è¯¢(å¯é€‰)
æ‰€é€‰æ¨¡å‹ä»»åŠ¡`vllm_api_stream_chat`ã€æ•°æ®é›†ä»»åŠ¡`demo_gsm8k_gen_4_shot_cot_chat_prompt`å’Œç»“æœå‘ˆç°ä»»åŠ¡`default_perf`çš„å…·ä½“ä¿¡æ¯(ç®€ä»‹ï¼Œä½¿ç”¨çº¦æŸç­‰)å¯ä»¥åˆ†åˆ«ä»å¦‚ä¸‹é“¾æ¥ä¸­æŸ¥è¯¢å«ä¹‰ï¼š
- `--models`: ğŸ“š [æœåŠ¡åŒ–æ¨ç†åç«¯](../all_params/models.md#æœåŠ¡åŒ–æ¨ç†åç«¯)

- `--datasets`:ğŸ“š [å¼€æºæ•°æ®é›†](../all_params/datasets.md#å¼€æºæ•°æ®é›†) â†’ ğŸ“š [è¯¦ç»†ä»‹ç»](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/datasets/demo/README.md)

- `--summarizer`:ğŸ“š [ç»“æœæ±‡æ€»ä»»åŠ¡](../all_params/summarizer.md#æ”¯æŒçš„ç»“æœæ±‡æ€»ä»»åŠ¡)

### è¿è¡Œå‘½ä»¤å‰ç½®å‡†å¤‡
- `--models`: ä½¿ç”¨`vllm_api_stream_chat`æ¨¡å‹ä»»åŠ¡ï¼Œéœ€è¦å‡†å¤‡æ”¯æŒ`v1/chat/completions`å­æœåŠ¡çš„æ¨ç†æœåŠ¡ï¼Œå¯ä»¥å‚è€ƒğŸ”— [VLLMå¯åŠ¨OpenAI å…¼å®¹æœåŠ¡å™¨](https://docs.vllm.com.cn/en/latest/getting_started/quickstart.html#openai-compatible-server)å¯åŠ¨æ¨ç†æœåŠ¡
- `--datasets`: ä½¿ç”¨`demo_gsm8k_gen_4_shot_cot_chat_prompt`æ•°æ®é›†ä»»åŠ¡ï¼Œéœ€è¦å‡†å¤‡gsm8kæ•°æ®é›†ï¼Œå¯ä»¥ä»ğŸ”— [opencompass
æä¾›çš„gsm8kæ•°æ®é›†å‹ç¼©åŒ…](http://opencompass.oss-cn-shanghai.aliyuncs.com/datasets/data/gsm8k.zip)ä¸‹è½½ã€‚å°†è§£å‹åçš„`gsm8k/`æ–‡ä»¶å¤¹éƒ¨ç½²åˆ°AISBenchè¯„æµ‹å·¥å…·æ ¹è·¯å¾„ä¸‹çš„`ais_bench/datasets`æ–‡ä»¶å¤¹ä¸‹ã€‚

### ä»»åŠ¡å¯¹åº”é…ç½®æ–‡ä»¶ä¿®æ”¹
æ¯ä¸ªæ¨¡å‹ä»»åŠ¡ã€æ•°æ®é›†ä»»åŠ¡å’Œç»“æœå‘ˆç°ä»»åŠ¡éƒ½å¯¹åº”ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¿è¡Œå‘½ä»¤å‰éœ€è¦ä¿®æ”¹è¿™äº›é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚è¿™äº›é…ç½®æ–‡ä»¶è·¯å¾„å¯ä»¥é€šè¿‡åœ¨åŸæœ‰AISBenchå‘½ä»¤åŸºç¡€ä¸ŠåŠ ä¸Š`--search`æ¥æŸ¥è¯¢ï¼Œä¾‹å¦‚ï¼š
```shell
# æ³¨æ„searchçš„å‘½ä»¤ä¸­æ˜¯å¦åŠ  "--mode perf" ä¸å½±å“æœç´¢ç»“æœ
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --mode perf --search
```
> âš ï¸ **æ³¨æ„**ï¼š æ‰§è¡Œå¸¦searchå‘½ä»¤ä¼šæ‰“å°å‡ºä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚

æ‰§è¡ŒæŸ¥è¯¢å‘½ä»¤å¯ä»¥å¾—åˆ°å¦‚ä¸‹æŸ¥è¯¢ç»“æœï¼š
```shell
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type    â”‚ Task Name                             â”‚ Config File Path                                                                                                               â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --models     â”‚ vllm_api_stream_chat                  â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/models/vllm_api/vllm_api_stream_chat.py                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets   â”‚ demo_gsm8k_gen_4_shot_cot_chat_prompt â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/datasets/demo/demo_gsm8k_gen_4_shot_cot_chat_prompt.py                   â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

```

- å¿«é€Ÿå…¥é—¨ä¸­æ•°æ®é›†ä»»åŠ¡é…ç½®æ–‡ä»¶`demo_gsm8k_gen_4_shot_cot_chat_prompt.py`ä¸éœ€è¦åšé¢å¤–ä¿®æ”¹ï¼Œæ•°æ®é›†ä»»åŠ¡é…ç½®æ–‡ä»¶å†…å®¹ä»‹ç»å¯å‚è€ƒğŸ“š [é…ç½®å¼€æºæ•°æ®é›†](../all_params/datasets.md#é…ç½®å¼€æºæ•°æ®é›†)

æ¨¡å‹é…ç½®æ–‡ä»¶`vllm_api_stream_chat.py`ä¸­åŒ…å«äº†æ¨¡å‹è¿è¡Œç›¸å…³çš„é…ç½®å†…å®¹ï¼Œæ˜¯éœ€è¦ä¾æ®å®é™…æƒ…å†µä¿®æ”¹çš„ã€‚å¿«é€Ÿå…¥é—¨ä¸­éœ€è¦ä¿®æ”¹çš„å†…å®¹ç”¨æ³¨é‡Šæ ‡æ˜ã€‚
```python
from ais_bench.benchmark.models import VLLMCustomAPIChatStream

models = [
    dict(
        attr="service",
        type=VLLMCustomAPIChat,
        abbr='vllm-api-general-chat',
        path="",                    # æŒ‡å®šæ¨¡å‹åºåˆ—åŒ–è¯è¡¨æ–‡ä»¶ç»å¯¹è·¯å¾„ï¼ˆç²¾åº¦æµ‹è¯•åœºæ™¯ä¸€èˆ¬ä¸éœ€è¦é…ç½®ï¼‰
        model="",        # æŒ‡å®šæœåŠ¡ç«¯å·²åŠ è½½æ¨¡å‹åç§°ï¼Œä¾æ®å®é™…VLLMæ¨ç†æœåŠ¡æ‹‰å–çš„æ¨¡å‹åç§°é…ç½®ï¼ˆé…ç½®æˆç©ºå­—ç¬¦ä¸²ä¼šè‡ªåŠ¨è·å–ï¼‰
        stream=True, # æœåŠ¡åŒ–æ€§èƒ½åªæ”¯æŒè¯„æµ‹æµå¼æ¥å£
        request_rate=0,           # è¯·æ±‚å‘é€é¢‘ç‡ï¼Œæ¯1/request_rateç§’å‘é€1ä¸ªè¯·æ±‚ç»™æœåŠ¡ç«¯ï¼Œå°äº0.1åˆ™ä¸€æ¬¡æ€§å‘é€æ‰€æœ‰è¯·æ±‚
        retry=2,                  # æ¯ä¸ªè¯·æ±‚æœ€å¤§é‡è¯•æ¬¡æ•°
        headers={"Content-Type": "application/json"}, # è‡ªå®šä¹‰è¯·æ±‚å¤´ï¼Œé»˜è®¤{"Content-Type": "application/json"}
        host_ip="localhost",      # æŒ‡å®šæ¨ç†æœåŠ¡çš„IP
        host_port=8080,           # æŒ‡å®šæ¨ç†æœåŠ¡çš„ç«¯å£
        url="",                     # è‡ªå®šä¹‰è®¿é—®æ¨ç†æœåŠ¡çš„URLè·¯å¾„(å½“base urlä¸æ˜¯http://host_ip:host_portçš„ç»„åˆæ—¶éœ€è¦é…ç½®ï¼Œé…ç½®åhost_ipå’Œhost_portå°†è¢«å¿½ç•¥)
        max_out_len=512,          # æ¨ç†æœåŠ¡è¾“å‡ºçš„tokençš„æœ€å¤§æ•°é‡
        batch_size=1,               # è¯·æ±‚å‘é€çš„æœ€å¤§å¹¶å‘æ•°
        trust_remote_code=False,    # tokenizeræ˜¯å¦ä¿¡ä»»è¿œç¨‹ä»£ç ï¼Œé»˜è®¤False;
        generation_kwargs=dict(   # æ¨¡å‹æ¨ç†å‚æ•°ï¼Œå‚è€ƒVLLMæ–‡æ¡£é…ç½®ï¼ŒAISBenchè¯„æµ‹å·¥å…·ä¸åšå¤„ç†ï¼Œåœ¨å‘é€çš„è¯·æ±‚ä¸­é™„å¸¦
            temperature=0.01,
            ignore_eos=True, # æµ‹æ€§èƒ½æ—¶å¦‚æœéœ€è¦é™å®šè¾“å‡ºé•¿åº¦ï¼Œéœ€è¦å°†ignore_eosè®¾ç½®ä¸ºTrue
        )
    )
]
```
### æ‰§è¡Œå‘½ä»¤
ä¿®æ”¹å¥½é…ç½®æ–‡ä»¶åï¼Œæ‰§è¡Œå‘½ä»¤å¯åŠ¨æœåŠ¡åŒ–æ€§èƒ½è¯„æµ‹ï¼š
```bash
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt -m perf
```
#### æŸ¥çœ‹ä»»åŠ¡æ‰§è¡Œç»†èŠ‚
æ‰§è¡ŒAISBenchå‘½ä»¤åï¼Œæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡çŠ¶æ€ä¼šåœ¨å‘½ä»¤è¡Œå®æ—¶åˆ·æ–°çš„çœ‹æ¿ä¸Šæ˜¾ç¤ºï¼ˆé”®ç›˜æŒ‰"P"é”®å¯ä»¥åœæ­¢åˆ·æ–°ï¼Œç”¨äºå¤åˆ¶çœ‹æ¿ä¿¡æ¯ï¼Œå†æŒ‰"P"å¯ä»¥ç»§ç»­åˆ·æ–°ï¼‰ï¼Œä¾‹å¦‚ï¼š
```
Base path of result&log : outputs/default/20251106_103326
Task Progress Table (Updated at: 2025-11-06 10:34:41)
Page: 1/1  Total 2 rows of data
Press Up/Down arrow to page,  'P' to PAUZE/RESUME screen refresh, 'Ctrl + C' to exit

+---------------------------------+-----------+-------------------------------------------------+-------------+-------------+------------------------------------------------+------------------------------------------------+
| Task Name                       |   Process | Progress                                        | Time Cost   | Status      | Log Path                                       | Extend Parameters                              |
+=================================+===========+=================================================+=============+=============+================================================+================================================+
| vllm-api-stream-chat/demo_gsm8k |    744887 | [###########                   ] 3/8 [0.1 it/s] | 0:00:54     | inferencing | logs/infer/vllm-api-stream-chat/demo_gsm8k.out | {'POST': 4, 'RECV': 3, 'FINISH': 3, 'FAIL': 0} |
+---------------------------------+-----------+-------------------------------------------------+-------------+-------------+------------------------------------------------+------------------------------------------------+
`

```

ä»»åŠ¡æ‰§è¡Œçš„ç»†èŠ‚æ—¥å¿—ä¼šä¸æ–­è½ç›˜åœ¨é»˜è®¤çš„è¾“å‡ºè·¯å¾„ï¼Œè¿™ä¸ªè¾“å‡ºè·¯å¾„åœ¨å®æ—¶åˆ·æ–°çš„çœ‹æ¿ä¸Šæ˜¾ç¤ºï¼Œå³`Log Path`ã€‚`Log Path`ï¼ˆ`logs/infer/vllm-api-stream-chat/demo_gsm8k.out`ï¼‰æ˜¯åœ¨`Base path`ï¼ˆ`outputs/default/20251106_103326`ï¼‰ä¸‹çš„è·¯å¾„ï¼Œä»¥ä¸Šè¿°çš„çœ‹æ¿ä¿¡æ¯ä¸ºä¾‹ï¼Œä»»åŠ¡æ‰§è¡Œçš„è¯¦ç»†æ—¥å¿—è·¯å¾„ä¸ºï¼š
```shell
# {Base path}/{Log Path}
outputs/default/20251106_103326/logs/infer/vllm-api-stream-chat/demo_gsm8k.out
```

> ğŸ’¡ å¦‚æœå¸Œæœ›æ‰§è¡Œè¿‡ç¨‹ä¸­å°†è¯¦ç»†æ—¥å¿—ç›´æ¥æ‰“å°ï¼Œæ‰§è¡Œå‘½ä»¤æ—¶å¯ä»¥åŠ ä¸Š `--debug`:
`ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt -m perf --debug`

### æŸ¥çœ‹æ€§èƒ½ç»“æœ
æ€§èƒ½ç»“æœæ‰“å±ç¤ºä¾‹å¦‚ä¸‹ï¼š

```bash
[2025-11-06 10:35:43,667] [ais_bench] [INFO] Performance Results of task: vllm-api-stream-chat/demo_gsm8k:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min             â”‚ Max             â”‚ Median          â”‚ P75             â”‚ P90             â”‚ P99             â”‚  N  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 12300.2 ms      â”‚ 12295.9 ms      â”‚ 12305.2 ms      â”‚ 12300.0 ms      â”‚ 12302.1 ms      â”‚ 12304.3 ms      â”‚ 12305.1 ms      â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ TTFT                     â”‚ total   â”‚ 2006.0 ms       â”‚ 2005.1 ms       â”‚ 2007.4 ms       â”‚ 2006.1 ms       â”‚ 2006.2 ms       â”‚ 2006.6 ms       â”‚ 2007.3 ms       â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ TPOT                     â”‚ total   â”‚ 20.1 ms         â”‚ 20.1 ms         â”‚ 20.2 ms         â”‚ 20.1 ms         â”‚ 20.1 ms         â”‚ 20.2 ms         â”‚ 20.2 ms         â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ ITL                      â”‚ total   â”‚ 20.1 ms         â”‚ 19.8 ms         â”‚ 21.3 ms         â”‚ 20.1 ms         â”‚ 20.2 ms         â”‚ 20.2 ms         â”‚ 20.4 ms         â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ InputTokens              â”‚ total   â”‚ 1512.5          â”‚ 1481.0          â”‚ 1566.0          â”‚ 1511.5          â”‚ 1520.25         â”‚ 1536.6          â”‚ 1563.06         â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ OutputTokens             â”‚ total   â”‚ 512.0           â”‚ 512.0           â”‚ 512.0           â”‚ 512.0           â”‚ 512.0           â”‚ 512.0           â”‚ 512.0           â”‚  8  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚ OutputTokenThroughput    â”‚ total   â”‚ 41.6254 token/s â”‚ 41.6085 token/s â”‚ 41.6398 token/s â”‚ 41.6261 token/s â”‚ 41.6338 token/s â”‚ 41.6375 token/s â”‚ 41.6395 token/s â”‚  8  â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•›
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value            â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 98409.4916 ms    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Requests           â”‚ total   â”‚ 8                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Failed Requests          â”‚ total   â”‚ 0                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Success Requests         â”‚ total   â”‚ 8                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Concurrency              â”‚ total   â”‚ 0.9999           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Max Concurrency          â”‚ total   â”‚ 1                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Request Throughput       â”‚ total   â”‚ 0.0813 req/s     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Input Tokens       â”‚ total   â”‚ 12100            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prefill Token Throughput â”‚ total   â”‚ 753.9843 token/s â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Generated Tokens   â”‚ total   â”‚ 4096             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input Token Throughput   â”‚ total   â”‚ 122.9556 token/s â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output Token Throughput  â”‚ total   â”‚ 41.622 token/s   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Token Throughput   â”‚ total   â”‚ 164.5776 token/s â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›
[2025-11-06 10:35:43,672] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_103326/performances/vllm-api-stream-chat.
```
ğŸ’¡ å…·ä½“æ€§èƒ½å‚æ•°çš„å«ä¹‰è¯·å‚è€ƒğŸ“š [æ€§èƒ½æµ‹è¯„ç»“æœè¯´æ˜](../results_intro/performance_metric.md)

### æ€§èƒ½ç»†èŠ‚æŸ¥çœ‹
æ‰§è¡ŒAISBenchå‘½ä»¤åï¼Œä»»åŠ¡æ‰§è¡Œæ›´å¤šç»†èŠ‚æœ€ç»ˆä¼šè½ç›˜åœ¨`Base path`ï¼ˆ`outputs/default/20251106_103326`ï¼‰

å‘½ä»¤æ‰§è¡Œç»“æŸå`outputs/default/20250628_151326`ä¸­çš„ä»»åŠ¡æ‰§è¡Œçš„ç»†èŠ‚å¦‚ä¸‹æ‰€ç¤ºï¼š
```shell
20251106_103326          # æ¯æ¬¡å®éªŒåŸºäºæ—¶é—´æˆ³ç”Ÿæˆçš„å”¯ä¸€ç›®å½•
â”œâ”€â”€ configs               # è‡ªåŠ¨å­˜å‚¨çš„æ‰€æœ‰å·²è½¬å‚¨é…ç½®æ–‡ä»¶
â”œâ”€â”€ logs                  # æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¥å¿—ï¼Œå‘½ä»¤ä¸­å¦‚æœåŠ --debugï¼Œä¸ä¼šæœ‰è¿‡ç¨‹æ—¥å¿—è½ç›˜ï¼ˆéƒ½ç›´æ¥æ‰“å°å‡ºæ¥äº†ï¼‰
â”‚   â””â”€â”€ performance/      # æ¨ç†é˜¶æ®µçš„æ—¥å¿—æ–‡ä»¶
â””â”€â”€ performance           # æ€§èƒ½æµ‹è¯„ç»“æœ
â”‚    â””â”€â”€ vllm-api-stream-chat/          # â€œæœåŠ¡åŒ–æ¨¡å‹é…ç½®â€åç§°ï¼Œå¯¹åº”æ¨¡å‹ä»»åŠ¡é…ç½®æ–‡ä»¶ä¸­modelsçš„ abbrå‚æ•°
â”‚         â”œâ”€â”€ demo_gsm8k.csv          # å•æ¬¡è¯·æ±‚æ€§èƒ½è¾“å‡ºï¼ˆCSVï¼‰ï¼Œä¸æ€§èƒ½ç»“æœæ‰“å±ä¸­çš„Performance Parametersè¡¨æ ¼ä¸€è‡´
â”‚         â”œâ”€â”€ demo_gsm8k.json         # ç«¯åˆ°ç«¯æ€§èƒ½è¾“å‡ºï¼ˆJSONï¼‰ï¼Œä¸æ€§èƒ½ç»“æœæ‰“å±ä¸­çš„Common Metricè¡¨æ ¼ä¸€è‡´
â”‚         â”œâ”€â”€ demo_gsm8k_plot.html    # è¯·æ±‚å¹¶å‘å¯è§†åŒ–æŠ¥å‘Šï¼ˆHTMLï¼‰
â”‚         â””â”€â”€ ......
```
ğŸ’¡å…¶ä¸­ `demo_gsm8k_plot.html`è¿™ä¸ªè¯·æ±‚å¹¶å‘å¯è§†åŒ–æŠ¥å‘Šå»ºè®®ä½¿ç”¨Chromeæˆ–è€…Edgeç­‰æµè§ˆå™¨æ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªè¯·æ±‚çš„æ—¶å»¶ä»¥åŠæ¯ä¸ªæ—¶åˆ»clientç«¯æ„ŸçŸ¥çš„æœåŠ¡æ—¶é—´å¹¶å‘æ•°ï¼š
  ![full_plot_example.img](../../img/request_concurrency/full_plot_example.png)
è¯¥htmlå¯è§†åŒ–å›¾æ–‡ä»¶çš„ä½¿ç”¨æ–¹å¼è¯·å‚è€ƒğŸ“š [æ€§èƒ½æµ‹è¯•å¯è§†åŒ–å¹¶å‘å›¾ä½¿ç”¨è¯´æ˜](../results_intro/performance_visualization.md)

## æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å‰ç½®çº¦æŸ
åœ¨æ‰§è¡ŒæœåŠ¡åŒ–æ¨ç†å‰ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- å¯è®¿é—®çš„æœåŠ¡åŒ–æ¨¡å‹æœåŠ¡ï¼šç¡®ä¿æœåŠ¡è¿›ç¨‹å¯åœ¨å½“å‰ç¯å¢ƒä¸‹ç›´æ¥è®¿é—®ã€‚
- æ•°æ®é›†å‡†å¤‡ï¼š
    - å¼€æºæ•°æ®é›†ï¼šä»ğŸ“š [å¼€æºæ•°æ®é›†](../all_params/datasets.md#å¼€æºæ•°æ®é›†)ä¸­é€‰æ‹©æ•°æ®é›†ï¼Œå¹¶ä¸”åœ¨æ•°æ®é›†å¯¹åº”çš„"è¯¦ç»†ä»‹ç»"æ–‡æ¡£ä¸­é€‰æ‹©è¦æ‰§è¡Œçš„æ•°æ®é›†ä»»åŠ¡ã€‚å‚è€ƒé€‰å–çš„æ•°æ®é›†ä»»åŠ¡å¯¹åº”çš„"è¯¦ç»†ä»‹ç»"æ–‡æ¡£å‡†å¤‡å¥½æ•°æ®é›†æ–‡ä»¶ï¼Œå»ºè®®å°†å¼€æºæ•°æ®é›†æ‰‹åŠ¨æ”¾ç½®åœ¨é»˜è®¤ç›®å½• `ais_bench/datasets/`ä¸‹ï¼Œç¨‹åºå°†åœ¨ä»»åŠ¡æ‰§è¡Œæ—¶è‡ªåŠ¨åŠ è½½æ•°æ®é›†æ–‡ä»¶ã€‚
    - éšæœºåˆæˆæ•°æ®é›†ï¼šæ•°æ®é›†ä»»åŠ¡é€‰`synthetic_gen`ï¼Œå…¶ä»–é…ç½®å‚è€ƒğŸ“š [éšæœºåˆæˆæ•°æ®é›†](../../advanced_tutorials/synthetic_dataset.md)ã€‚
    - è‡ªå®šä¹‰æ•°æ®é›†ï¼šæ— éœ€æŒ‡å®šæ•°æ®é›†ä»»åŠ¡ï¼Œå…¶ä»–é…ç½®å‚è€ƒğŸ“š [è‡ªå®šä¹‰æ•°æ®é›†](../../advanced_tutorials/custom_dataset.md)ã€‚
- æœåŠ¡åŒ–æ¨¡å‹åç«¯é…ç½®ï¼šä»[æœåŠ¡åŒ–æ¨ç†åç«¯](../all_params/models.md#æœåŠ¡åŒ–æ¨ç†åç«¯)ä¸­é€‰æ‹©æ¥å£ç±»å‹ä¸º`æµå¼æ¥å£`çš„å­æœåŠ¡ï¼ˆâš ï¸  å…¶ä»–ä¸æ”¯æŒï¼‰ã€‚

## ä¸»è¦åŠŸèƒ½åœºæ™¯
### å•ä»»åŠ¡è¯„æµ‹
å‚è€ƒ[æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å¿«é€Ÿå…¥é—¨](#æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯„å¿«é€Ÿå…¥é—¨)
### å¤šä»»åŠ¡æµ‹è¯„
æ”¯æŒåŒæ—¶é…ç½®å¤šä¸ªæ¨¡å‹æˆ–å¤šä¸ªæ•°æ®é›†ä»»åŠ¡ï¼Œé€šè¿‡å•æ¬¡å‘½ä»¤è¿›è¡Œæ‰¹é‡æµ‹è¯„ï¼Œé€‚ç”¨äºå¤šä¸ªæµ‹è¯•å‘½ä»¤ä¸²è¡Œæ‰§è¡Œã€‚
#### å‘½ä»¤è¯´æ˜
ç”¨æˆ·å¯é€šè¿‡`--models`å’Œ`--datasets`å‚æ•°æŒ‡å®šå¤šä¸ªé…ç½®ä»»åŠ¡ï¼Œå­ä»»åŠ¡æ•°ä¸º`--models`é…ç½®ä»»åŠ¡æ•°å’Œ`--datasets`é…ç½®ä»»åŠ¡æ•°çš„ä¹˜ç§¯ï¼Œå³ä¸€ä¸ªæ¨¡å‹é…ç½®å’Œä¸€ä¸ªæ•°æ®é›†é…ç½®ç»„æˆä¸€ä¸ªå­ä»»åŠ¡ï¼Œç¤ºä¾‹ï¼š
```bash
ais_bench --models vllm_api_general_stream vllm_api_stream_chat --datasets gsm8k_gen_4_shot_cot_str aime2024_gen_0_shot_str --mode perf
```
ä¸Šè¿°å‘½ä»¤æŒ‡å®šäº†2ä¸ªæ¨¡å‹ä»»åŠ¡ï¼ˆ`vllm_api_general_stream` `vllm_api_stream_chat`ï¼‰å’Œ2ä¸ªæ•°æ®é›†ä»»åŠ¡ï¼ˆ`gsm8k_gen_4_shot_cot_str` `aime2024_gen_0_shot_str`ï¼‰ï¼Œå°†æ‰§è¡Œä»¥ä¸‹4ä¸ªç»„åˆæ€§èƒ½æµ‹è¯•ä»»åŠ¡ï¼š
+ [vllm_api_general_stream](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/models/vllm_api/vllm_api_general_stream.py)æ¨¡å‹ä»»åŠ¡ + [gsm8k_gen_4_shot_cot_str](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/datasets/gsm8k/gsm8k_gen_4_shot_cot_str.py) æ•°æ®é›†ä»»åŠ¡
+ [vllm_api_general_stream](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/models/vllm_api/vllm_api_general_stream.py)æ¨¡å‹ä»»åŠ¡ + [aime2024_gen_0_shot_str](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/datasets/aime2024/aime2024_gen_0_shot_str) æ•°æ®é›†ä»»åŠ¡
+ [vllm_api_stream_chat](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/models/vllm_api/vllm_api_stream_chat.py)æ¨¡å‹ä»»åŠ¡ + [gsm8k_gen_4_shot_cot_str](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/datasets/gsm8k/gsm8k_gen_4_shot_cot_str.py) æ•°æ®é›†ä»»åŠ¡
+ [vllm_api_stream_chat](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/models/vllm_api/vllm_api_stream_chat.py)æ¨¡å‹ä»»åŠ¡ + [aime2024_gen_0_shot_str](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/configs/datasets/aime2024/aime2024_gen_0_shot_str.py) æ•°æ®é›†ä»»åŠ¡

#### ä¿®æ”¹ä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶
æ¨¡å‹ä»»åŠ¡å’Œæ•°æ®é›†ä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶å®é™…è·¯å¾„é€šè¿‡æ‰§è¡ŒåŠ `--search`å‘½ä»¤æŸ¥è¯¢ï¼š
```bash
ais_bench --models vllm_api_general_stream vllm_api_stream_chat --datasets gsm8k_gen_4_shot_cot_str aime2024_gen_0_shot_str --mode perf --search
```
æŸ¥è¯¢åˆ°å¦‚ä¸‹é…ç½®æ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼š
```bash
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type   â”‚ Task Name                â”‚ Config File Path                                                                                                          â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --models    â”‚ vllm_api_general_stream  â”‚ /your_workspace/benchmark_test/ais_bench/benchmark/configs/models/vllm_api/vllm_api_general_stream.py                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --models    â”‚ vllm_api_stream_chat     â”‚ /your_workspace/benchmark_test/ais_bench/benchmark/configs/models/vllm_api/vllm_api_stream_chat.py                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets  â”‚ gsm8k_gen_4_shot_cot_str â”‚ /your_workspace/benchmark_test/ais_bench/benchmark/configs/datasets/gsm8k/gsm8k_gen_4_shot_cot_str.py                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets  â”‚ aime2024_gen_0_shot_str  â”‚ /your_workspace/benchmark_test/ais_bench/benchmark/configs/datasets/aime2024/aime2024_gen_0_shot_str.py                   â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

```
- å‚è€ƒğŸ“š [æœåŠ¡åŒ–æ¨ç†åç«¯é…ç½®å‚æ•°è¯´æ˜](../all_params/models.md#æœåŠ¡åŒ–æ¨ç†åç«¯é…ç½®å‚æ•°è¯´æ˜)æŒ‰ç…§å®é™…æƒ…å†µé…ç½®æ¨¡å‹ä»»åŠ¡`vllm_api_general_streamt`å’Œ`vllm_api_stream_chat`å¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚
- å‚è€ƒğŸ“š [é…ç½®å¼€æºæ•°æ®é›†](../all_params/datasets.md#é…ç½®å¼€æºæ•°æ®é›†)æŒ‰ç…§å®é™…æƒ…å†µé…ç½®æ•°æ®é›†ä»»åŠ¡`gsm8k_gen_4_shot_cot_str`å’Œ`aime2024_gen_0_shot_str`å¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚**æ³¨**ï¼šå¦‚æœæ•°æ®é›†æ”¾åœ¨é»˜è®¤ç›®å½• `ais_bench/datasets/`ä¸‹ï¼Œåˆ™ä¸€èˆ¬ä¸éœ€è¦é…ç½®

#### æ‰§è¡Œè¯„æµ‹å‘½ä»¤
æ‰§è¡Œå‘½ä»¤ï¼š
```bash
ais_bench --models vllm_api_general_stream vllm_api_stream_chat --datasets gsm8k_gen_4_shot_cot_str aime2024_gen_0_shot_str --mode perf
```

æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šåœ¨ğŸ“š [`--work-dir`](../all_params/cli_args.md#å…¬å…±å‚æ•°)è·¯å¾„ï¼ˆé»˜è®¤æ˜¯`outputs/default/`ï¼‰ä¸‹åˆ›å»ºæ—¶é—´æˆ³ç›®å½•ç”¨äºä¿å­˜æ‰§è¡Œç»†èŠ‚ã€‚
4ä¸ªæ€§èƒ½è¯„æµ‹ä»»åŠ¡ç»“æŸåä¼šä¸€æ¬¡æ€§æ‰“å°4ä¸ªä»»åŠ¡çš„æ€§èƒ½ç»“æœï¼š
```bash
[2025-11-06 10:35:43,667] [ais_bench] [INFO] Performance Results of task: vllm-api-stream-chat/demo_gsm8k:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min           â”‚ Max             â”‚ Median          â”‚ P75             â”‚ P90             â”‚ P99             â”‚  N   â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2754.0929 ms    â”‚ 2189.0804 ms  â”‚ 3366.1463 ms    â”‚ 2753.1668 ms    â”‚ 3048.2929 ms    â”‚ 3222.573 ms     â”‚ 3303.3894 ms    â”‚ 1319 â”‚
......
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value              â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 38039.9928 ms      â”‚
......
[2025-11-06 11:11:33,468] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_110904/performances/vllm-api-general-stream.
[2025-11-06 11:11:33,468] [ais_bench] [INFO] Performance Results of task: vllm-api-general-stream/aime2024:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min            â”‚ Max            â”‚ Median        â”‚ P75             â”‚ P90             â”‚ P99             â”‚  N  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2868.1822 ms    â”‚ 2277.1049 ms   â”‚ 3307.2084 ms   â”‚ 2941.6767 ms  â”‚ 3158.5361 ms    â”‚ 3220.2141 ms    â”‚ 3307.0174 ms    â”‚ 30  â”‚
......
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value             â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 3346.9782 ms      â”‚
......
[2025-11-06 11:11:33,471] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_110904/performances/vllm-api-general-stream.
[2025-11-06 11:11:33,471] [ais_bench] [INFO] Performance Results of task: vllm-api-stream-chat/gsm8k:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min            â”‚ Max             â”‚ Median          â”‚ P75             â”‚ P90            â”‚ P99             â”‚  N   â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2753.3518 ms    â”‚ 2189.5185 ms   â”‚ 3339.4463 ms    â”‚ 2755.8153 ms    â”‚ 3039.7431 ms    â”‚ 3219.6642 ms   â”‚ 3313.0408 ms    â”‚ 1319 â”‚
......
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value              â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 38101.2396 ms      â”‚
......
[2025-11-06 11:11:33,474] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_110904/performances/vllm-api-stream-chat.
[2025-11-06 11:11:33,474] [ais_bench] [INFO] Performance Results of task: vllm-api-stream-chat/aime2024:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min           â”‚ Max            â”‚ Median          â”‚ P75             â”‚ P90             â”‚ P99             â”‚  N  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2745.4115 ms    â”‚ 2187.5882 ms  â”‚ 3288.4635 ms   â”‚ 2820.7541 ms    â”‚ 2988.8338 ms    â”‚ 3188.436 ms     â”‚ 3273.7475 ms    â”‚ 30  â”‚
......
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value             â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 3335.7672 ms      â”‚
......
[2025-11-06 11:11:33,477] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_110904/performances/vllm-api-stream-chat.

```

åŒæ—¶æœ€ç»ˆç”Ÿæˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š


```bash
# output/defaultä¸‹
20251106_110904/     # ä»»åŠ¡åˆ›å»ºæ—¶é—´å¯¹åº”çš„è¾“å‡ºç›®å½•
â”œâ”€â”€ configs          # æ¨¡å‹ä»»åŠ¡ã€æ•°æ®é›†ä»»åŠ¡å’Œç»“æ„å‘ˆç°ä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶åˆæˆçš„ä¸€ä¸ªé…ç½®ä»¶
â”œâ”€â”€ logs             # åŒ…å«æ¨ç†ä¸ç²¾åº¦è¯„ä¼°é˜¶æ®µçš„æ—¥å¿—ï¼Œå‘½ä»¤åŠ --debugæ—¶ä¼šç›´æ¥æ‰“å±ä¸ä¼šç”Ÿæˆè½ç›˜æ–‡ä»¶
â”‚   â””â”€â”€ performance  # æ¨ç†é˜¶æ®µçš„æ—¥å¿—æ–‡ä»¶
â””â”€â”€ performances     # æ€§èƒ½æµ‹è¯„ç»“æœ
    â”œâ”€â”€ vllm-api-general-stream            # â€œæœåŠ¡åŒ–æ¨¡å‹é…ç½®â€åç§°ï¼Œå¯¹åº”æ¨¡å‹ä»»åŠ¡é…ç½®æ–‡ä»¶ä¸­modelsçš„ abbrå‚æ•°
    â”‚Â Â  â”œâ”€â”€ aime2024.csv            # å•æ¬¡è¯·æ±‚æ€§èƒ½è¾“å‡ºï¼ˆCSVï¼‰ï¼Œä¸æ€§èƒ½ç»“æœæ‰“å±ä¸­çš„Performance Parametersè¡¨æ ¼ä¸€è‡´
    â”‚Â Â  â”œâ”€â”€ aime2024.json           # ç«¯åˆ°ç«¯æ€§èƒ½è¾“å‡ºï¼ˆJSONï¼‰ï¼Œä¸æ€§èƒ½ç»“æœæ‰“å±ä¸­çš„Common Metricè¡¨æ ¼ä¸€è‡´
    â”‚Â Â  â”œâ”€â”€ aime2024_plot.html      # è¯·æ±‚å¹¶å‘å¯è§†åŒ–æŠ¥å‘Šï¼ˆHTMLï¼‰
    â”‚Â Â  â”œâ”€â”€ gsm8k.csv
    â”‚Â Â  â”œâ”€â”€ gsm8k.json
    â”‚Â Â  â”œâ”€â”€ gsm8k_plot.html
    â”‚Â Â  â””â”€â”€ ......
    â””â”€â”€ vllm-api-stream-chat
        â”œâ”€â”€ aime2024.csv
        â”œâ”€â”€ aime2024.json
        â”œâ”€â”€ aime2024_plot.html
        â”œâ”€â”€ gsm8k.csv
        â”œâ”€â”€ gsm8k.json
        â”œâ”€â”€ gsm8k_plot.html
        â””â”€â”€ ......

```
> âš ï¸ æ³¨æ„ï¼š
> - åœ¨å¤šä»»åŠ¡æ€§èƒ½æµ‹è¯„åœºæ™¯ä¸‹ï¼Œ`--datasets`æŒ‡å®šçš„æ•°æ®é›†ä»»åŠ¡å¿…é¡»å±äºä¸åŒçš„æ•°æ®é›†ç±»å‹ï¼Œæ€§èƒ½æ•°æ®ä¼šå› ä¸ºè¦†ç›–è€Œç¼ºå¤±ã€‚ä¾‹å¦‚ä¸å¯é€šè¿‡`--datasets`åŒæ—¶æŒ‡å®š`aime2024_gen_0_shot_str` å’Œ `aime2024_gen_0_shot_chat_prompt`è¿™ä¸¤ä¸ªæ•°æ®é›†ä»»åŠ¡ã€‚


### è‡ªå®šä¹‰åºåˆ—é•¿åº¦æµ‹è¯„
#### 1 é…ç½®è‡ªå®šä¹‰åºåˆ—æ•°æ®é›†è¾“å…¥è¾“å‡ºåˆ†å¸ƒ
è‡ªå®šä¹‰åºåˆ—é•¿åº¦æµ‹è¯„éœ€è¦æŒ‡å®šç‰¹æ®Šçš„æ•°æ®é›†ä»»åŠ¡`synthetic_gen_string`ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥æ£€ç´¢`synthetic_gen_string`å¯¹åº”çš„é…ç½®æ–‡ä»¶æ‰€åœ¨è·¯å¾„â€ï¼š
```bash
ais_bench --models vllm_api_stream_chat --datasets synthetic_gen_string --search
```
å¾—åˆ°ï¼š
```
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type    â”‚ Task Name                             â”‚ Config File Path                                                                                                               â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --models     â”‚ vllm_api_stream_chat                  â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/models/vllm_api/vllm_api_stream_chat.py                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --datasets   â”‚ synthetic_gen_string                  â”‚ /your_workspace/benchmark/ais_bench/benchmark/configs/datasets/synthetic/synthetic_gen_string.py                               â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›
```

ä¿®æ”¹`/your_workspace/benchmark/ais_bench/benchmark/configs/datasets/synthetic/synthetic_gen_string.py`ä¸­çš„`synthetic_config`ã€‚é…ç½®å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š
```python
synthetic_config = {
    "Type": "string",
    "RequestCount": 1000, # è¯·æ±‚ä¸ªæ•°ï¼ˆæ•°æ®é›†æ¡æ•°ï¼‰
    "StringConfig": {
        "Input": {
            "Method": "uniform",
            "Params": {"MinValue": 50, "MaxValue": 500}  # è¾“å…¥é•¿åº¦50-500
        },
        "Output": {
            "Method": "uniform",
            "Params": {"MinValue": 20, "MaxValue": 200}  # è¾“å‡ºé•¿åº¦20-200
        }
    }
}
```
ğŸ’¡æ›´å¤šçš„è‡ªå®šä¹‰è¾“å…¥è¾“å‡ºåˆ†å¸ƒå¯å‚è€ƒğŸ“š [éšæœºåˆæˆæ•°æ®é›†](../../advanced_tutorials/synthetic_dataset.md)

#### 2 ç¡®ä¿æ¨ç†æœåŠ¡è¾¾åˆ°è®¾ç½®çš„æœ€å¤§è¾“å‡º
ä¸ºäº†ç¡®ä¿æ¨ç†æœåŠ¡è¾¾åˆ°è®¾ç½®çš„æœ€å¤§è¾“å‡ºï¼Œéœ€è¦åœ¨ğŸ“š [æœåŠ¡åŒ–æ¨¡å‹é…ç½®](../all_params/models.md#æœåŠ¡åŒ–æ¨ç†åç«¯é…ç½®å‚æ•°è¯´æ˜)çš„ `generation_kwargs` ä¸­é…ç½®ç‰¹æ®Šçš„åå¤„ç†å‚æ•°`ignore_eos = True`ï¼Œä»¥æ§åˆ¶è¯·æ±‚çš„æœ€å¤§è¾“å‡ºé•¿åº¦ï¼ˆä¸æå‰ç»“æŸï¼‰ã€‚

ä¾‹å¦‚ä¿®æ”¹`vllm_api_stream_chat`æ¨¡å‹ä»»åŠ¡å¯¹åº”çš„é…ç½®æ–‡ä»¶[vllm_api_stream_chat.py](https://github.com/AISBench/benchmark/tree/master/ais_bench/benchmark/models/vllm_api/vllm_api_stream_chat.py)å†…å®¹ï¼š
```python
from ais_bench.benchmark.models import VLLMCustomAPIChatStream
models = [
    dict(
        attr="service",
        type=VLLMCustomAPIChatStream,
        abbr='vllm-api-stream-chat',
        # ç«¯å£ IPç­‰å…¶ä»–æ¨¡å‹ä»»åŠ¡å‚æ•°è¯·è‡ªè¡Œé…ç½®å¥½
        generation_kwargs = dict(
            # .....
            ignore_eos = True,      # æ¨ç†æœåŠ¡è¾“å‡ºå¿½ç•¥eosï¼ˆè¾“å‡ºé•¿åº¦ä¸€å®šä¼šè¾¾åˆ°max_out_lenï¼‰
        )
    )
]

```

#### 3 å¯åŠ¨æ€§èƒ½æµ‹è¯„
æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
ais_bench --models  vllm_api_stream_chat --datasets synthetic_gen_string -m perf
```
å®Œæˆåï¼Œè¾“å‡ºç›®å½•ç»“æ„åŒ[å¤šä»»åŠ¡æµ‹è¯„](#å¤šä»»åŠ¡æµ‹è¯„)ç« èŠ‚æ‰€ç¤ºï¼Œä¼šåœ¨ performance/vllm-api-stream-chat/synthetic* ä¸‹ç”Ÿæˆç›¸åº”çš„ CSV/JSON/HTML æ–‡ä»¶ã€‚
> âš ï¸ æ³¨æ„ï¼š
> - éƒ¨åˆ†æœåŠ¡åŒ–åç«¯ä¸æ”¯æŒ `ignore_eos` åå¤„ç†å‚æ•°ï¼Œæ­¤æ—¶å®é™…è¾“å‡ºçš„ `Token` æ•°å¯èƒ½æ— æ³•è¾¾åˆ°æ‰€é…ç½®çš„æœ€å¤§è¾“å‡ºé•¿åº¦ï¼Œéœ€è¦é€šè¿‡å…¶ä»–åå¤„ç†å‚æ•°çš„é…ç½®è¾¾åˆ°æœ€å¤§è¾“å‡ºé•¿åº¦ï¼ˆä¾‹å¦‚é™å®šæœ€å°è¾“å‡ºçš„åå¤„ç†å‚æ•°ç­‰ï¼‰ã€‚

### å›ºå®šè¯·æ±‚æ•°æµ‹è¯„

å½“é›†è§„æ¨¡è¿‡å¤§ï¼Œåªæƒ³é’ˆæ•°æ®å¯¹éƒ¨åˆ†æ ·æœ¬æ‰§è¡Œæ€§èƒ½æµ‹è¯•æ—¶ï¼Œå¯ä½¿ç”¨ ğŸ“š [`--num-prompts`](../all_params/cli_args.md#æ€§èƒ½æµ‹è¯„å‚æ•°) å‚æ•°æŒ‡å®šè¯»å–çš„æ•°æ®æ¡æ•°ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š
```bash
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt -m perf --num-prompts 1
```
ä¸Šè¿°å‘½ä»¤ä»…å¯¹ç¤ºä¾‹æ•°æ®é›†ä¸­çš„ç¬¬ä¸€æ¡è®°å½•è¿›è¡Œæ¨ç†å¹¶æµ‹é‡æ€§èƒ½ã€‚
> âš ï¸ æ³¨æ„ï¼šå½“å‰æ•°æ®é›†ä¼šæŒ‰ç…§é»˜è®¤é˜Ÿåˆ—é¡ºåºä¾æ¬¡è¯»å–ï¼Œä¸æ”¯æŒéšæœºæŠ½æ ·æˆ–æ‰“ä¹±é¡ºåºã€‚


## å…¶ä»–åŠŸèƒ½åœºæ™¯
### æ€§èƒ½ç»“æœé‡è®¡ç®—
æ€§èƒ½æµ‹è¯•çš„ä¸»è¦åŠŸèƒ½åœºæ™¯è¯„æµ‹å·¥å…·ä¼šæ‰§è¡Œå®Œæ•´çš„æ€§èƒ½é‡‡æ · â†’ è®¡ç®— â†’ æ±‡æ€»æµç¨‹
```mermaid
graph LR;
  A[åŸºäºç»™å®šæ•°æ®é›†æ‰§è¡Œæ¨ç†] --> B((æ€§èƒ½æ‰“ç‚¹æ•°æ®))
  B --> C[åŸºäºæ‰“ç‚¹æ•°æ®è¿›è¡ŒæŒ‡æ ‡è®¡ç®—]
  C --> D((æ€§èƒ½æ•°æ®))
  D --> E[åŸºäºæ€§èƒ½æ•°æ®ç”Ÿæˆæ±‡æ€»æŠ¥å‘Š]
  E --> F((å‘ˆç°ç»“æœ))
```
æ‰§è¡Œæµç¨‹çš„æ¯ä¸ªç¯èŠ‚æ˜¯ç‹¬ç«‹è§£è€¦çš„ï¼Œè®¡ç®—å’Œæ±‡æ€»å¯ä»¥åŸºäºæ€§èƒ½é‡‡æ ·çš„ç»“æœåå¤æ‰§è¡Œã€‚å¦‚æœç›´æ¥æ‰“å°å‡ºçš„æ€§èƒ½æ•°æ®ä¸åŒ…å«ç›¸å…³ç»´åº¦çš„æ•°æ®ï¼ˆä¾‹å¦‚ç¼ºå°‘percentage 95%çš„æ•°æ®ï¼‰ï¼Œå°±éœ€è¦åšä¸€äº›é…ç½®ä¿®æ”¹æ¥é‡è®¡ç®—ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ã€‚

å‡è®¾ä¸Šæ¬¡æ‰§è¡Œæ€§èƒ½æµ‹è¯„çš„å‘½ä»¤æ˜¯ï¼š
```bash
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --mode perf
```
æ‰“å°å‡ºçš„`Performance Parameters`è¡¨æ ¼å¦‚ä¸‹æ‰€ç¤ºï¼š
```bash
[2025-11-06 11:11:33,463] [ais_bench] [INFO] Performance Results of task: vllm-api-general-stream/gsm8k:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average         â”‚ Min            â”‚ Max             â”‚ Median          â”‚ P75             â”‚ P90            â”‚ P99             â”‚  N   â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2753.3518 ms    â”‚ 2189.5185 ms   â”‚ 3339.4463 ms    â”‚ 2755.8153 ms    â”‚ 3039.7431 ms    â”‚ 3219.6642 ms   â”‚ 3313.0408 ms    â”‚ 1319 â”‚
......
```

å¦‚æœæƒ³çŸ¥é“â€œP95â€ç»´åº¦çš„æ€§èƒ½æ•°æ®ï¼Œéœ€è¦ä¿®æ”¹`--summarizer`å¯¹åº”çš„é»˜è®¤ç»“æœå‘ˆç°ä»»åŠ¡default_perfå¯¹åº”çš„é…ç½®æ–‡ä»¶å†…å®¹ï¼Œdefault_perfçš„è·¯å¾„é€šè¿‡`--search`å‘½ä»¤æŸ¥è¯¢ï¼š
```bash
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Task Type    â”‚ Task Name    â”‚ Config File Path                                                                                              â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ --summarizer â”‚ default_perf â”‚ /your_workspace/ais_bench/benchmark/configs/summarizers/perf/default_perf.py                                  â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•›

```

ä¿®æ”¹default_perf.pyçš„å†…å®¹ï¼š
```py
from mmengine.config import read_base
from ais_bench.benchmark.summarizers import DefaultPerfSummarizer
from ais_bench.benchmark.calculators import DefaultPerfMetricCalculator

summarizer = dict(
    type=DefaultPerfSummarizer,
    calculator=dict(
        type=DefaultPerfMetricCalculator,
        stats_list=["Average", "Min", "Max", "Median", "P95"],
    )
)
```
å…¶ä¸­`stats_list`ä¸­æœ€å¤šåŒæ—¶æ‰¿è½½8ä¸ªæ€§èƒ½ç»´åº¦çš„æ•°æ®ã€‚

ä¿®æ”¹å®Œæ¯•åå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤é‡è®¡ç®—æ€§èƒ½æŒ‡æ ‡ï¼š

```bash
## æ³¨æ„å¿…é¡»æŒ‡å®š--summarizer default_perf
ais_bench --models vllm_api_stream_chat --datasets demo_gsm8k_gen_4_shot_cot_chat_prompt --summarizer default_perf --mode perf_viz --pressure --debug --reuse 20250628_151326
```
æ€§èƒ½ç»“æœæ‰“å±å¦‚ä¸‹ï¼š
```bash
[2025-11-06 11:11:33,463] [ais_bench] [INFO] Performance Results of task: vllm-api-general-stream/gsm8k:
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â••
â”‚ Performance Parameters   â”‚ Stage   â”‚ Average        â”‚ Min             â”‚ Max             â”‚ Median         â”‚ P95             â”‚  N  â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•¡
â”‚ E2EL                     â”‚ total   â”‚ 2761.6153 ms   â”‚ 2493.8016 ms    â”‚ 3086.0523 ms    â”‚ 2848.9603 ms   â”‚ 3021.0043 ms    â”‚  8  â”‚
......
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Common Metric            â”‚ Stage   â”‚ Value             â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Benchmark Duration       â”‚ total   â”‚ 3090.7835 ms      â”‚
......
[2025-11-06 11:11:33,468] [ais_bench] [INFO] Performance Result files located in outputs/default/20251106_110904/performances/vllm-api-general-stream.

```
> âš ï¸  `20251106_110904/performance/`ä¸‹`gsm8kdataset.csv`ï¼Œ`gsm8kdataset_details.json`å’Œ`gsm8kdataset_plot.html`ä¼šé‡æ–°ç”Ÿæˆï¼ˆè¦†ç›–åŸæœ‰çš„ï¼‰ã€‚

## æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯•è§„æ ¼è¯´æ˜
æœåŠ¡åŒ–æ€§èƒ½æµ‹è¯•çš„è§„æ¨¡å†³å®šäº†AISBenchè¯„æµ‹å·¥å…·çš„èµ„æºå ç”¨ã€‚ä»¥[è‡ªå®šä¹‰åºåˆ—é•¿åº¦æµ‹è¯„](#è‡ªå®šä¹‰åºåˆ—é•¿åº¦æµ‹è¯„)ä¸ºä¾‹ï¼Œæµ‹è¯•è§„æ¨¡ä¸»è¦ç”±æ€»è¯·æ±‚æ¡æ•°ï¼ˆ`RequestCount`ï¼‰ã€æ•°æ®é›†è¾“å…¥tokensé•¿åº¦ï¼ˆ`Input`ï¼‰,è¾“å‡ºtokensé•¿åº¦ï¼ˆ`Output`ï¼‰å†³å®šã€‚åœ¨`Intel(R) Xeon(R) Platinum 8480P`å‹å·cpuä¸Šæµ‹è¯•ï¼Œå…¸å‹æµ‹è¯•è§„æ¨¡ä¸‹èµ„æºçš„å ç”¨å¤§è‡´å¦‚ä¸‹ï¼š
|æ€»è¯·æ±‚æ¡æ•°ï¼ˆ`RequestCount`ï¼‰|æ•°æ®é›†è¾“å…¥tokensé•¿åº¦ï¼ˆ`Input`ï¼‰|tokensé•¿åº¦ï¼ˆ`Output`ï¼‰|æœ€å¤§å†…å­˜å ç”¨(GB)|æœ€å¤§ç£ç›˜å ç”¨(GB)|æ€§èƒ½æ•°æ®è®¡ç®—æ—¶é—´(s)|å¤‡æ³¨|
| ---------- | --------- | ----------- | ---------- | ----------- | ------------| ---|
|10000|1024|1024|< 16|0.12|3||
|10000|1024|4096|< 16|0.16|4||
|10000|4096|4096|< 16|0.17|6||
|50000|4096|4096|< 32|0.80|30||
|250000|4096|4096|< 64|4.00|150|æœ€å¤§è§„æ ¼|

> âš ï¸ æ€§èƒ½æ•°æ®çš„æœ€å¤§å†…å­˜å ç”¨ã€æœ€å¤§ç£ç›˜å ç”¨å’Œè®¡ç®—æ—¶é•¿å¤§è‡´ä¸ï¼ˆ`RequestCount Ã— (Input + Output)`ï¼‰å¤§å°æˆæ­£æ¯”ï¼ŒAISBenchå•æœºèƒ½æ”¯æŒçš„æœ€å¤§è§„æ ¼ä¸º`RequestCount Ã— (Input + Output) = 250000 * (4096 + 4096) = 2,024,000,000`